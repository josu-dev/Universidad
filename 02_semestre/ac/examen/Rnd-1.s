EOI EQU 20H
INT0 EQU 24H
N_F10 EQU 10

PA EQU 30H

ORG 40
 DW RUT_F10

ORG 1000H
 MSJ DB "INGRESE UN NUMERO DEL 1 AL 9:"
 MSJ_FIN DB ?
 MSJ_PAR DB 0AH
         DB "EL NUMERO NO ES IMPAR"
 MSJ_PAR_FIN DB ?
 
ORG 1500H
 NUM DB ?

ORG 2000H
 CALL LEER_NUM
 CLI
 MOV AL,1
 OUT PA+2,AL
 OUT PA,AL
 MOV AL,0
 OUT PA+3,AL
 
 MOV AL,11111110B
 OUT EOI+1,AL
 MOV AL,N_F10
 OUT INT0,AL
 STI
 MOV BX,OFFSET NUM
 BUCLE: JMP BUCLE
 INT 0
 
ORG 3000H
 LEER_NUM: MOV BX,OFFSET MSJ
  MOV AL, OFFSET MSJ_FIN - OFFSET MSJ
  INT 7
  MOV BX, OFFSET NUM
  LEER: INT 6
   CMP BYTE PTR [BX],31H
   JS LEER
   CMP BYTE PTR [BX],40H
   JNS LEER
 RET
 
 RUT_F10:MOV AL,[BX]
  AND AL,1
  JNZ POLL
   MOV BX,OFFSET MSJ_PAR
   MOV AL,OFFSET MSJ_PAR_FIN - OFFSET MSJ_PAR
   INT 7
   JMP FIN
   POLL: IN AL,PA
    AND AL,1
    JNZ POLL
   MOV AL,[BX]
   OUT PA+1,AL
   MOV AL,2
   OUT PA,AL
   MOV AL,0
   OUT PA,AL
   MOV AL,[BX]
   SUB AL,2
   MOV [BX],AL
   CMP AL,2FH
   JNZ POLL
  FIN: MOV AL,EOI
   OUT EOI, AL
 IRET

END